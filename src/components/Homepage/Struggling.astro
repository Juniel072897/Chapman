---
/**
 * Usage:
 * <ChapmanFeature src="/images/Chpmanfeature.webp" />
 */
const {
  src = "/images/Chpmanfeature.webp",
  alt = "Plumbing feature collage",
} = Astro.props;
---

<section class="feature-wrap animate-root" data-animate>
  <div class="feature__grid">
    <figure class="feature__media animate-item" style="--d:0.05s">
      <img src={src} alt={alt} loading="lazy" />
    </figure>

    <div class="feature__content">
      <div class="feature__block animate-item" style="--d:0.15s">
        <h3>Struggling With Plumbing Issues?</h3>
        <p>
          Maintaining a functional home can be challenging when plumbing
          problems rear their ugly heads! Leaky faucets, slow drains, and
          unexpected water heater problems can disrupt your daily life and
          cause unnecessary stress.
        </p>
      </div>

      <div class="feature__block animate-item" style="--d:0.25s">
        <h3>My Last Experience With a Plumber was a Nightmare!</h3>
        <p>
          It can be devastating when a minor plumbing problem quickly escalates
          into a major headache when not handled promptly and professionally.
          A simple leak can turn into a chaotic ordeal if you let someone
          handle it unprepared and clueless â€” leaving you with a flooded
          bathroom with extensive damage.
        </p>
      </div>

      <div class="feature__block animate-item" style="--d:0.35s">
        <h3>Leave Your Plumbing Woes Behind!</h3>
        <p>
          From timely repairs of unexpected emergencies to thorough maintenance,
          Chapman Plumbing has the expertise to fix it all. Our goal is to
          ensure that your plumbing system operates seamlessly so that you can
          enjoy a comfortable and worry-free environment. Allow us to show you
          how we can turn your plumbing nightmares into a thing of the past!
        </p>
      </div>
    </div>
  </div>
</section>

<style>
/* === Same container vars as header/hero === */
:root{ --container-pad: 16px; --container-max-wide: 1360px; }

/* Wrap uses the SAME width calculation as hero/header */
.feature-wrap{
  width: min(100% - (var(--container-pad)*2), var(--container-max-wide));
  margin-inline: auto;
  padding-block: 2.5rem;  /* match vertical rhythm */
}

/* Grid */
.feature__grid{
  display:grid;
  grid-template-columns:1fr;
  gap:2rem;
  align-items:stretch;
}
@media (min-width:1024px){
  .feature__grid{ grid-template-columns: 7fr 5fr; gap: 4rem; } /* big image like screenshot */
}

/* Image */
.feature__media{ width:100%; min-height:700px; }
@media (min-width:1280px){ .feature__media{ min-height:300px; } }
.feature__media img{ display:block; width:100%; height:100%; object-fit:cover; border-radius:12px; }

/* Text */
.feature__content{ display:grid; gap:2rem; }
.feature__block{ display:grid; gap:.75rem; }
.feature__content h2,
.feature__content h3,
.feature__content p{ margin:0; }
.feature__content p{ line-height:1.65; max-width:78ch; }

/* Animations */
@keyframes fadeInUp{ from{opacity:0; transform:translateY(30px)} to{opacity:1; transform:translateY(0)} }
.animate-root .animate-item{ opacity:0; transform:translateY(30px); }
.animate-root.is-visible .animate-item{ animation:fadeInUp .6s ease-out forwards; animation-delay:var(--d,0s); }
@media (prefers-reduced-motion:reduce){
  .animate-root .animate-item, .animate-root.is-visible .animate-item{ animation:none!important; opacity:1!important; transform:none!important; }
}
</style>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const section = document.querySelector("[data-animate]");
    if (!section) return;
    const reveal = () => section.classList.add("is-visible");

    if ("IntersectionObserver" in window) {
      const io = new IntersectionObserver((entries, obs) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            reveal();
            obs.unobserve(entry.target);
          }
        });
      }, { threshold: 0.2 });
      io.observe(section);
    } else {
      reveal();
    }
  });
</script>
